<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Duper Feeder - WebSub Hub</title>
  <link rel="stylesheet" href="/ui/styles.css">
</head>

<body>
  <header>
    <h1>Super Duper Feeder</h1>
    <p>A Spec compliant WebSub/PubSubHubbub service</p>
    <nav>
      <a href="/ui/index.html" class="active">Home</a>
      <a href="/ui/subscribe.html">Subscribe</a>
      <a href="/ui/unsubscribe.html">Unsubscribe</a>
      <a href="/ui/subscriptions.html">Manage Subscriptions</a>
    </nav>
  </header>

  <main>
    <section id="overview">
      <h2>Overview</h2>
      <p>
        Super Duper Feeder is a WebSub/PubSubHubbub hub that allows publishers to notify subscribers
        about content updates in real-time. It also includes RSS polling for feeds that don't support
        WebSub natively.
      </p>
    </section>

    <section id="websub">
      <h2>WebSub Hub</h2>
      <p>
        The WebSub hub is available at <code>https://superduperfeeder.deno.dev/</code>. It supports
        both WebSub and PubSubHubbub protocols.
      </p>

      <h3>For Publishers</h3>
      <p>
        To publish updates to the hub, send a POST request to the hub URL with the following parameters:
      </p>
      <pre><code>POST https://superduperfeeder.deno.dev/
Content-Type: application/x-www-form-urlencoded

hub.mode=publish&hub.url=https://example.com/feed.xml</code></pre>

      <h3>For Subscribers</h3>
      <p>
        To subscribe to updates, send a POST request to the hub URL with the following parameters:
      </p>
      <pre><code>POST https://superduperfeeder.deno.dev/
Content-Type: application/x-www-form-urlencoded

hub.callback=https://example.com/callback&hub.mode=subscribe&hub.topic=https://example.com/feed.xml&hub.lease_seconds=86400</code></pre>

      <p>
        To unsubscribe, send a similar request with <code>hub.mode=unsubscribe</code>.
      </p>
    </section>

    <section id="firehose">
      <h2>Firehose</h2>
      <p>
        The firehose provides real-time updates for all content changes. It supports WebSockets,
        Server-Sent Events (SSE), and webhooks.
      </p>

      <h3>Webhooks</h3>
      <p>
        Register a webhook to receive updates via HTTP POST requests.
      </p>
      <pre><code>POST https://superduperfeeder.deno.dev/firehose/webhook
Content-Type: application/json

{
  "url": "https://example.com/webhook",
  "contentType": "application/json",
  "filters": [
    {
      "type": "topic",
      "value": "https://example.com/feed.xml"
    }
  ]
}</code></pre>
    </section>

    <section id="api-reference">
      <h2>API Reference</h2>

      <h3>WebSub Hub Endpoints</h3>
      <ul>
        <li><code>POST /</code> - Main hub endpoint for subscription and publishing</li>
        <li><code>GET /</code> - Documentation and UI</li>
      </ul>

      <h3>Firehose Endpoints</h3>
      <ul>
        <li><code>GET /firehose/ws</code> - WebSocket connection for real-time updates</li>
        <li><code>GET /firehose/sse</code> - Server-Sent Events endpoint for real-time updates</li>
        <li><code>POST /firehose/webhook</code> - Register a webhook URL to receive updates</li>
        <li><code>DELETE /firehose/webhook/:id</code> - Remove a registered webhook</li>
        <li><code>GET /firehose/webhook</code> - List registered webhooks</li>
      </ul>
    </section>
  </main>

  <footer>
    <p>Super Duper Feeder - A WebSub/PubSubHubbub service</p>
  </footer>
</body>

</html>